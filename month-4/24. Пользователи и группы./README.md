# 24. Пользователи и группы. Авторизация и аутентификация_РАМ.

## Что требуется сделать

Запретить всем пользователям кроме группы admin логин в выходные (суббота и воскресенье), без учета праздников. Проверка осуществляется запуском скрипта, который проверяет день недели и группу пользователей, к которой принадлежит пользователь.

## Что было сделано

1) Все необходимые настройки осуществляются на этапе provisioning VM в Vagrant.
2) Созданы пользователи otus и otusadmin. Для пользователей были прописаны пароли и ssh-ключи.
3) Был подготовлен скрипт, который проверяет текущий день недели и группу к которой относит пользователь.
4) В файл `/etc/pam.d/sshd` в соотвествии с методическими рекоммендациями была внесена запись `auth required pam_exec.so debug /usr/local/bin/login.sh`.
5) Однако данный подход не препятствловал пользователям подключаться по ssh-ключам к серверу.
6) Было принято решение скорректировать конфигурацию PAM следующим образом: `account required pam_exec.so debug /usr/local/bin/login.sh`. Таким образом, удалось обеспечить проверку прав доступа самого аккаунта при любом способе подключения: по паролю или ssh-ключу.
